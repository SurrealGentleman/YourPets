{% extends "base.html" %}
{% load static %}
{% block title %}Профиль{% endblock %}
{% block src %}
    <link rel="stylesheet" href="{% static 'css\style_profile.css' %}" />
    <script src="{% static 'js\send_request_on_add_update.js' %}"></script>
    <script src="{% static 'js\open_popup.js'%}"></script>
    <script src="{% static 'js\timeout_redirect.js'%}"></script>
    <script src="{% static 'js\add_photo.js'%}"></script>
    <script src="{% static 'js\confirm_delete_user.js'%}"></script>
    <script src="{% static 'js\first_radio_checked.js'%}"></script>
{% endblock %}
{% block main%}
    <div class="flex_block">
        <div class="profile_block">
           <img class="photo_user" src="{% static 'image\user2.png'%}" alt="Photo user">
            <form method="POST" class="form_profile">
                {% csrf_token %}
                <div>
                    {% for item in form_profile_change %}
                        <label for="{{item.id_for_label}}">{{ item.label }}</label>
                        {{item}}
                        <div class="errors">{{ item.errors }}</div>
                    {% endfor %}
                    <a href="" class="open_popup change_password" id="change_password">Сменить пароль</a>
                    <a href="javascript:void(0)" class="change_password" onclick="return showModal()">Удалить</a>
<!--                    javascript:void(0) - Это выражение возвращается как «undefined», что означает, что не будет производиться редирект на другую страницу-->
                </div>
                <div class="overlay">
                   <div id="confirmModal" style="display:none;">
                       <p>Вы уверены, что хотите продолжить?</p>
                       <div>
                           <a id="yesBtn" class="button_change" href="{% url 'delete_user' %}" >Да</a>
                           <a id="noBtn" class="button_change" >Нет</a>
                       </div>
                   </div>
                </div>

                <button type="submit" class="button_change" name="profile_change">Изменить</button>
                {% for message in messages %}
                  <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                {% endfor %}
            </form>
        </div>
        <div class="user_pets">
            <p class="slogan">Мои питомцы</p>
            <div class="choice_pet">
                {% for pet in select_pets %}
                    <input class='display_none' type="radio" name="id_pets" id="{{pet.pk}}">
                    <label for="{{pet.pk}}">
                        <img class='round_pets' src="{{pet.photo.url}}">
                    </label>
                {% endfor %}
                <input class='display_none' type="radio" name="id_pets" id="add-pet_button">
                <label for="add-pet_button">
                    <div class="round_pets add">
                       <img src="{% static 'image\plus.png' %}">
                    </div>
                </label>
            </div>
            <form method="POST" enctype='multipart/form-data'>
                {% csrf_token %}
                <div id="form-container-add_update_pet"></div>
                {{ form_pet.non_field_errors }}
            </form>
        </div>
    </div>
    <div class="popUp-bg">
        <div class="popUp">
            <p class="name_popup">Сменить пароль</p>
            <form id="form_change_password" method="POST" class="password">
                {% csrf_token %}
                {% for item in form_password_change %}
                    <label for="{{item.id_for_label}}">{{ item.label }}</label>
                    {{item}}
                    <div class="errors">{{ item.errors }}</div>
                {% endfor %}
                <div class="flex-reg">
                    <button type="submit" class="button_change" name="password_change">Изменить</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
